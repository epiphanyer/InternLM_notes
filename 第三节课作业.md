# 概述
HuixiangDou 是一个基于大型语言模型（LLM）的技术助理系统，旨在帮助算法开发者解答与开源算法项目相关的问题，如 OpenMMLab 的计算机视觉和深度学习项目。该系统通过迭代改进，集成到即时通讯（IM）工具的群聊中，如微信和Lark，能够有效回答问题且不造成信息泛滥。

# 贡献
为群聊场景设计了特定的算法流程。
验证了 text2vec 在任务拒绝中的可靠性能。
确定了技术助理产品中 LLM 的三个关键需求：评分能力、上下文学习（ICL）和长文本处理。
# 系统设计
预处理用户输入：将群聊中的多条连续消息合并为一条，忽略非文本元素如视频、表情和语音消息。
拒绝管道：使用 text2vec 和 LLM 评分构建两阶段拒绝回答过滤器，以去除无关聊天内容。
响应管道：通过搜索机制减少内部幻觉，确定信息源的重要性并按顺序使用。
# 实验
模型微调：选择了一个基础模型进行微调，考虑了领域特定术语、长文本处理和上下文学习等因素。
text2vec 在拒绝管道中的应用：通过手动标注用户内容，测试了不同 text2vec 模型在拒绝回答任务中的准确性。
LLM 评分在意图识别中的应用：使用 LLM 评分来确定任务的最终得分，用于意图识别和相关性评估。
# 其他尝试
自然语言处理（NLP）在 RAG 中的应用：尝试简化查询和文档，但遇到了领域特定词性标注精度不足和双语问题。
提示技术：如分页机制，尝试通过提示使 LLM 理解整个代码库，但受限于模型的最大上下文长度。
# 结论与限制
HuixiangDou 证明了使用 text2vec 进行拒绝回答的可行性，并通过多种搜索方法减少了 LLM 引起的幻觉。
对于更专业的用户问题，基于提示和搜索方法提供满意的回答越来越困难，需要 LLM 真正理解代码库中的源代码。
由于 ChatML 格式的限制，丢失了大量上下文信息，新的聊天格式应充分表达问题的上下文、发言者的历史消息和评论。
用户喜欢先发送日志截图再提问，但 HuixiangDou 目前不支持多模态输入。
